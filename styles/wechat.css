/* styles/wechat.css */
#wechat-app .wechat-main-content { flex-grow: 1; overflow-y: auto; background-color: var(--bg-color); }
.wechat-tab-view { display: none; height:100%; overflow-y:auto; } .wechat-tab-view.active { display: block; }
.chat-list-item { display: flex; padding: 12px 16px; align-items: center; gap: 12px; background: var(--white); border-bottom: 1px solid var(--divider-color); cursor: pointer; }
.chat-list-item:active { background-color: #f0f0f0; }
.chat-avatar { width: 50px; height: 50px; border-radius: 6px; position: relative; flex-shrink: 0; background-size: cover; background-position: center; }
.unread-badge { position: absolute; top: -5px; right: -8px; background: var(--badge-red); color: white; border-radius: 10px; padding: 0 6px; font-size: 12px; line-height: 18px; }
.chat-info { flex-grow: 1; overflow: hidden; }
.chat-info-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.chat-name { font-size: 16px; color: var(--text-primary); font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.chat-time { font-size: 12px; color: var(--text-secondary); flex-shrink:0; margin-left:8px;}
.last-message { font-size: 14px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.last-message b { color: var(--wechat-green); }
.wechat-tabbar { height: 56px; background: var(--tabbar-bg); border-top: 1px solid var(--divider-color); display: flex; justify-content: space-around; flex-shrink: 0; }
.tab-item { display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 3px; cursor: pointer; color: #8a8a8a; flex: 1; }
.tab-item.active { color: var(--wechat-green); } .tab-item i { font-size: 22px; } .tab-item span { font-size: 11px; }
#chat-window-view { background-size: cover; background-position: center; background-attachment: fixed; }
.chat-content-area { flex-grow: 1; overflow-y: auto; padding: 10px; }
.messages-container { display: flex; flex-direction: column; gap: 15px; }
.message-row { display: flex; width: 100%; align-items: flex-start; gap: 8px; }
.msg-sent { flex-direction: row-reverse; }
.chat-win-avatar { width: 40px; height: 40px; border-radius: 5px; background-size: cover; background-position: center; flex-shrink: 0; }
.message-content { max-width: calc(100% - 100px); display: flex; flex-direction: column; }
.msg-received .message-content { align-items: flex-start; } .msg-sent .message-content { align-items: flex-end; }
.msg-sender-name { font-size: 12px; color: #888; margin: 0 10px 4px; }
.message-bubble { padding: 10px 12px; border-radius: 8px; font-size: 16px; line-height: 1.4; word-wrap: break-word; white-space: pre-wrap; position: relative; }
.message-row.deletable > .message-content > .message-bubble { cursor: pointer; }
.message-bubble img.custom-emoji { max-width: 100px; max-height: 100px; display: block; background: transparent !important; }
.message-bubble.sticker-bubble, .message-bubble.image-bubble, .message-bubble.interactive-bubble { background: transparent !important; padding: 0; box-shadow:none; border-radius: 8px; overflow:hidden;}
.message-bubble.sticker-bubble::before, .message-bubble.image-bubble::before, .message-bubble.interactive-bubble::before { display: none; }
.message-bubble.link-bubble { padding: 5px; background: white; border: 1px solid #eee; display: flex; align-items: center; gap: 8px; font-size: 14px; }
.link-bubble .icon { font-size: 24px; color: #888; padding: 5px; flex-shrink: 0; }
.image-placeholder { width: 150px; height: 150px; background-color: var(--white); border: 1px solid var(--divider-color); border-radius: 6px; display: flex; align-items: center; justify-content: center; text-align: center; font-size: 14px; color: var(--text-secondary); padding: 10px; word-break: break-word; line-height: 1.4; }
.msg-received .message-bubble { background: var(--white); color: var(--text-primary); }
.msg-sent .message-bubble { background: #a9e87a; color: var(--text-primary); }
.msg-received .message-bubble::before { content: ''; position: absolute; left: -6px; top: 14px; border: 6px solid transparent; border-right-color: var(--white); }
.msg-sent .message-bubble::before { content: ''; position: absolute; right: -6px; top: 14px; border: 6px solid transparent; border-left-color: #a9e87a; }
.timestamp-row, .system-message-row { text-align: center; margin: 0.5rem 0 1rem; }
.timestamp-text, .system-message-text { display: inline-block; background: #DADADA; color: #fff; font-size: 12px; padding: 2px 8px; border-radius: 4px; }
.interactive-timestamp summary { list-style: none; display: inline-block; cursor: pointer; } .interactive-timestamp summary::-webkit-details-marker { display: none; }
.interactive-timestamp .status-text { background: #f0f0f0; color: #888; font-size: 12px; padding: 4px 10px; border-radius: 8px; margin-top: 6px; display: inline-block; }
.system-message-text { background: #dcdcdc; color: #a0a0a0; }
.interactive-bubble-wrapper{ width: 240px; color: white; display: flex; flex-direction: column; position: relative; }
.msg-received .interactive-bubble-wrapper::before{ content: ''; position: absolute; left: -6px; top: 14px; border: 6px solid transparent; }
.msg-sent .interactive-bubble-wrapper::before{ content: ''; position: absolute; right: -6px; top: 14px; border: 6px solid transparent; }
.interactive-bubble-main { display: flex; align-items: center; padding: 12px 15px; gap: 15px;}
.interactive-bubble-main .icon { font-size: 32px; flex-shrink:0; }
.interactive-bubble-main .text-content { display: flex; flex-direction: column; overflow: hidden; }
.interactive-bubble-main .title { font-size: 16px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.interactive-bubble-main .subtitle { font-size: 13px; opacity: 0.8; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
.interactive-bubble-footer { font-size: 12px; padding: 4px 15px; background: rgba(0,0,0,0.05); color: #888; border-top: 1px solid rgba(0,0,0,0.05); }
.transfer-bubble { background-color: var(--wechat-orange); cursor: pointer; }
.msg-received .transfer-bubble::before { border-right-color: var(--wechat-orange); }
.msg-sent .transfer-bubble::before { border-left-color: var(--wechat-orange); }
.transfer-bubble .interactive-bubble-footer { background: var(--white); }
.red-packet-bubble { background-color: var(--wechat-red); cursor: pointer; }
.msg-received .red-packet-bubble::before { border-right-color: var(--wechat-red); }
.msg-sent .red-packet-bubble::before { border-left-color: var(--wechat-red); }
.red-packet-bubble .interactive-bubble-footer { background: var(--white); color: var(--wechat-orange); }
.gift-bubble { background: var(--gift-blue); cursor: pointer; background-image: url('https://files.catbox.moe/qr3mf4.jpeg'); background-size: cover; background-position: center;}
.gift-bubble .main-content-wrapper { background: rgba(0,0,0,0.2); backdrop-filter: blur(2px); }
.msg-received .gift-bubble::before { border-right-color: var(--gift-blue); }
.msg-sent .gift-bubble::before { border-left-color: var(--gift-blue); }
.gift-bubble .interactive-bubble-footer { background: rgba(0,0,0,0.3); color: var(--white); opacity: 0.8; }
.file-bubble { background-color: var(--white); border: 1px solid var(--divider-color); }
.msg-received .file-bubble::before { border-right-color: var(--white); }
.msg-sent .file-bubble { background: #a9e87a; border: none; }
.msg-sent .file-bubble::before { content:''; position: absolute; right: -6px; top: 14px; border: 6px solid transparent; border-left-color: #a9e87a; }
.file-bubble .interactive-bubble-main .icon { font-size: 38px; color: #7f8289; }
.file-bubble .interactive-bubble-main .title { color: var(--text-primary); font-size: 15px; }
.file-bubble .interactive-bubble-main .subtitle { color: var(--text-secondary); font-size: 12px; }
.location-bubble { background-color: white; border: 1px solid var(--divider-color); overflow: hidden; }
.msg-received .location-bubble::before { border-right-color: var(--white); }
.msg-sent .location-bubble { background-color: #a9e87a; border: none; }
.msg-sent .location-bubble::before { border-left-color: #a9e87a; }
.location-bubble .map-display { height: 100px; background-image: url('https://files.catbox.moe/2tptoh.jpeg'); background-size: cover; background-position: center; }
.location-bubble .location-info { padding: 8px 12px; background: var(--white); }
.location-bubble .location-info .title { font-size: 15px; color: var(--text-primary); }
.chat-footer { flex-shrink: 0; background-color: var(--header-bg); border-top: 1px solid var(--divider-color); position: relative; }
.chat-input-bar { display: flex; align-items: flex-end; gap: 8px; padding: 8px 12px; }
.chat-input-bar i { font-size: 28px; color: var(--text-primary); cursor: pointer; padding: 6px; flex-shrink: 0; }
.chat-input-bar .chat-input-bar_text { flex-grow: 1; min-height: 40px; max-height: 100px; border: none; background: var(--white); border-radius: 6px; padding: 10px; font-size: 16px; resize: none; overflow-y: auto; }
.send-button { display:none; padding: 8px 12px; background-color: var(--wechat-green); color: white; border: none; border-radius: 6px; font-size: 15px; cursor: pointer; flex-shrink: 0; height: 40px; align-self: flex-end; }
#chat-plus-btn { display: flex;}
.panel-container { height: 0; overflow: hidden; transition: height 0.3s ease-out; background-color: var(--bg-color); }
.panel-container.active { height: var(--panel-height); }
.panel-view { display: none; height: 100%; overflow-y: auto; box-sizing: border-box; }
#chat-plus-menu, #chat-emoji-menu { display: none; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px; }
#chat-plus-menu.active, #chat-emoji-menu.active { display: grid; }
.sticker-item, .plus-menu-item { display: flex; flex-direction: column; align-items: center; gap: 8px; color: #555; text-decoration: none; cursor: pointer; position: relative; }
.sticker-item img.sticker-preview, .plus-menu-item .icon-wrapper { width: 60px; height: 60px; background-color: white; border-radius: 12px; display: grid; place-items: center; object-fit: cover; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.plus-menu-item .icon-wrapper { font-size: 28px; color: var(--text-primary); border: none; }
.sticker-item .sticker-label, .plus-menu-item span { font-size: 12px; }
.add-sticker-btn .icon-wrapper { border: 2px dashed #ccc; background-color: #f9f9f9; color: #aaa; }
.delete-sticker-btn { position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; background-color: var(--badge-red); color: white; border-radius: 50%; display: grid; place-items: center; font-size: 14px; line-height: 1; font-weight: bold; cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.3); transform: scale(0); transition: transform 0.2s ease-out; }
.sticker-item:hover .delete-sticker-btn { transform: scale(1); }
#moments-view .content { flex-grow: 1; overflow-y: auto; background-color: var(--white); }
#friend-requests-view .content { flex-grow: 1; overflow-y: auto; background-color: var(--white); }
.moments-header-bg { height: 280px; background-size: cover; background-position: center; position: relative; }
.moments-user { position: absolute; bottom: -20px; right: 20px; display: flex; align-items: center; gap: 12px; }
.moments-user .name { font-size: 16px; font-weight: bold; color: var(--white); text-shadow: 1px 1px 3px #000; }
.moments-user .avatar { width: 70px; height: 70px; border-radius: 8px; border: 3px solid var(--white); background-size: cover; background-position: center;}
.moments-signature { margin: 25px 20px 15px 0; font-size: 13px; color: var(--text-secondary); text-align: right; padding: 0; }
.moments-feed { padding-top: 0; }
.moment-item { display: flex; gap: 12px; padding: 20px 15px; border-bottom: 1px solid var(--divider-color); position:relative; background-color: var(--white); }
.moment-avatar { width: 44px; height: 44px; border-radius: 6px; background-size: cover; flex-shrink: 0; }
.moment-body { flex-grow: 1; overflow: hidden; }
.moment-body .author { font-size: 16px; font-weight: bold; color: var(--link-blue); margin-bottom: 6px; cursor: pointer; }
.moment-body .content-text { font-size: 15px; line-height: 1.5; margin-bottom: 8px; white-space: pre-wrap; }
.moment-images { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; margin-bottom: 8px; max-width: 240px; }
.moment-image { aspect-ratio: 1/1; background-size: cover; background-position: center; border-radius: 4px; }
.moment-meta { display: flex; justify-content: space-between; align-items: center; font-size: 13px; color: var(--text-secondary); }
.moment-actions-btn { cursor: pointer; padding: 4px 8px; border-radius: 4px; background: #eee;}
.moment-actions-popup { display: none; position: absolute; right: 40px; bottom: 15px; background: #4c4c4c; border-radius: 4px; z-index: 10; overflow: hidden; align-items: center; }
.moment-actions-popup.active { display: flex; }
.moment-actions-popup a { color: white; padding: 8px 15px; font-size: 14px; text-decoration: none; display: flex; align-items: center; gap: 5px;}
.moment-actions-popup a:active { background: #333; }
.moment-actions-popup .action-delete { color: var(--badge-red); }
.moment-actions-popup .divider { width: 1px; height: 16px; background-color: #666; }
.moment-social { background: #f7f7f7; padding: 8px 12px; margin-top: 8px; font-size: 14px; border-radius: 4px; }
.moment-social i { color: var(--link-blue); margin-right: 4px; }
.moment-likes { color: var(--link-blue); }
.moment-comments { margin-top: 4px; display:flex; flex-direction:column; gap: 3px; }
.moment-comment b { color: var(--link-blue); font-weight:500; cursor:pointer; }
.moment-item.optimistic-post { opacity: 1; }
.menu-item { display: flex; align-items: center; gap: 16px; padding: 14px 16px; background: var(--white); cursor:pointer; position: relative; }
.menu-item:hover { background-color: #f9f9f9; }
.menu-item i { font-size: 22px; width: 24px; text-align: center; } .menu-label { flex-grow: 1; font-size: 16px; }
.menu-item .red-dot { width: 10px; height: 10px; background-color: var(--badge-red); border-radius: 50%; position: absolute; right: 20px; top: 50%; transform: translateY(-50%); display: none;}
.section-spacer { height: 8px; background: var(--bg-color); border-top: 1px solid rgba(0,0,0,0.05); border-bottom: 1px solid rgba(0,0,0,0.05);}
.profile-card { display: flex; align-items: center; gap: 16px; padding: 40px 20px 20px; background: var(--white); }
.profile-avatar { width: 64px; height: 64px; border-radius: 8px; background-size: cover; background-position: center; }
.profile-name { font-size: 22px; font-weight: bold; margin-bottom: 8px; }
.profile-id { font-size: 14px; color: var(--text-secondary); }
.contact-item { background: var(--white); padding: 10px 16px; display: flex; align-items: center; gap: 14px; border-bottom: 1px solid var(--divider-color); font-size: 16px; cursor:pointer;}
.contact-avatar { width: 44px; height: 44px; border-radius: 6px; background-size: cover; background-position: center; }
.contacts-group-title { padding: 4px 16px; background: var(--bg-color); font-size: 13px; color: var(--text-secondary); border-top: 1px solid var(--divider-color); border-bottom: 1px solid var(--divider-color); }
#wechat-contacts-view > .contacts-group-title:first-child { border-top: none; }
#settings-view .content, #chat-info-view .content {flex-grow:1; overflow-y:auto; background:var(--bg-color);}
#settings-view .setting-item { background:var(--white); padding:16px; border-bottom: 1px solid var(--divider-color); display:flex; justify-content:space-between; align-items:center; cursor: pointer; }
#settings-view .setting-item:hover { background: #f9f9f9; } #settings-view .setting-item i { color: #888; }
#manual-add-friend-topbar { padding: 15px; background: var(--white); border-bottom: 1px solid var(--divider-color); text-align: center; font-size: 16px; color: var(--link-blue); cursor: pointer; font-weight: 500; }
#manual-add-friend-topbar:hover { background-color: #f9f9f9; }
.friend-request-item { display: flex; padding: 12px 16px; gap: 12px; align-items: center; border-bottom: 1px solid var(--divider-color); background: var(--white); }
.friend-request-item .friend-info { flex-grow: 1; }
.friend-request-item .friend-info .name { font-size: 16px; font-weight: 500; margin-bottom: 4px; }
.friend-request-item .friend-info .message { font-size: 14px; color: var(--text-secondary); }
.friend-request-item .actions { display: flex; gap: 8px; flex-shrink: 0; }
.friend-request-item .actions button { padding: 6px 14px; border-radius: 6px; border: none; font-size: 14px; cursor: pointer; transition: background-color .2s; }
.friend-request-item .actions .accept-btn { background-color: var(--wechat-green); color: white; }
.friend-request-item .actions .accept-btn:hover { background-color: #06b45a; }
.friend-request-item .actions .accept-btn:disabled { background-color: #aaa; cursor: not-allowed; }
.friend-request-item .actions .accepted-text { color: var(--text-secondary); font-size:14px; }
#chat-info-view .member-grid-container { background: var(--white); padding: 16px; border-bottom: 1px solid var(--divider-color); }
#chat-info-view .member-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 16px 10px; }
#chat-info-view .member-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
#chat-info-view .member-avatar { width: 56px; height: 56px; border-radius: 6px; background-size: cover; background-position: center; margin-bottom: 6px; position:relative; }
#chat-info-view .member-avatar .admin-badge { position: absolute; bottom:-4px; right:-4px; width:16px; height:16px; font-size:10px; background: #FFC300; color:white; border-radius:50%; display:grid; place-items:center; border: 1px solid white; box-shadow: 0 0 2px rgba(0,0,0,0.3); }
#chat-info-view .member-name { font-size: 12px; color: var(--text-secondary); width: 100%; text-align: center; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#chat-info-view .action-button { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 56px; height: 56px; border: 1px dashed #ccc; border-radius: 6px; cursor: pointer; }
#chat-info-view .action-button:hover { background: #f9f9f9; }
#chat-info-view .action-button i { font-size: 20px; color: #aaa; }
#chat-info-view .show-all-members { display: block; padding: 12px; text-align: center; color: var(--text-secondary); font-size: 14px; background:var(--white); border-top: 1px solid var(--divider-color); cursor:pointer; }
#chat-info-view .info-menu-item { background:var(--white); border-bottom: 1px solid var(--divider-color); display:flex; justify-content:space-between; align-items:center; cursor: pointer; padding: 14px 16px; font-size: 16px; }
#chat-info-view .info-menu-item:hover { background: #f9f9f9; }
#chat-info-view .info-menu-item .label { flex-grow:1; } #chat-info-view .info-menu-item .value { color: var(--text-secondary); font-size: 15px; } #chat-info-view .info-menu-item .chevron { color: #ccc; margin-left: 8px; }
#chat-info-view .action-menu-item { background: var(--white); cursor: pointer; padding: 14px 16px; font-size: 16px; text-align: center; }
#chat-info-view .action-menu-item.danger { color: var(--badge-red); }
